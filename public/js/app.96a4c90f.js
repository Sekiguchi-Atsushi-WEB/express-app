(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],_=0,d=[];_<o.length;_++)r=o[_],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"0385":function(t,e,n){},"08d4":function(t,e,n){"use strict";var a=n("5938"),i=n.n(a);i.a},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},2:function(t,e){},3:function(t,e){},"37a1":function(t,e,n){},4:function(t,e){},"4ad5":function(t,e,n){},"4d6b":function(t,e,n){"use strict";var a=n("d408"),i=n("8207"),s=(n("d716"),n("2877")),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"a9717c6c",null);e["default"]=r.exports},"4f45":function(t,e,n){"use strict";var a=n("37a1"),i=n.n(a);i.a},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},s=[],r=(n("034f"),n("2877")),o={},c=Object(r["a"])(o,i,s,!1,null,null,null),l=c.exports,u=n("bc3a"),_=n.n(u),d=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{attrs:{id:"content"}},[t._m(0),n("section",[n("p",[t._v("『ひとこと日記』は、毎日の小さなできごとを簡単にメモしておけるWebサイトです。")]),n("p",[t._v("スマートフォン、タブレット、パソコンなどから利用可能です。")]),t.token?t._e():n("ul",[n("li",[t._v("・ユーザーの方は、"),n("router-link",{attrs:{to:"/login"}},[t._v("ログイン")]),t._v("へ")],1),n("li",[t._v("・ユーザー登録がお済みでない方は、"),n("router-link",{attrs:{to:"/regist"}},[t._v("新規ユーザー登録")]),t._v("へ")],1),n("li",[t._v("・登録せずに機能を試してみたい方は、"),n("router-link",{attrs:{to:"/trial"}},[t._v("お試しユーザーでログイン")]),t._v("へ")],1)]),t.token?n("ul",[n("li",[t._v("現在、"+t._s(t.nickname)+"さんのアカウントでログイン中です。")]),n("li",[n("router-link",{attrs:{to:"/mypage"}},[t._v(">>日記を見る")])],1),n("li",[n("span",{staticClass:"link_text",on:{click:t.logout}},[t._v(">>ログアウトする")])])]):t._e()]),n("section",[t._m(1),t._m(2),n("ul",[n("li",[t._v("・"),n("router-link",{attrs:{to:"/regist"}},[t._v("登録ページ")]),t._v("にて、ID、パスワード、ニックネームを入力すれば登録完了。日記ページが開きます。")],1)]),t._m(3),t._m(4),n("img",{staticClass:"img_idx_st2",attrs:{src:"/images/img_index_step2.png",alt:"日記作成"}})]),n("section",[n("p",{staticClass:"sec_title"},[t._v("特長")]),n("ul",[n("li",[t._v("・日記の更新・削除も簡単")]),n("li",[t._v("・様々なデバイスからログインして操作が可能")]),n("li",[n("router-link",{attrs:{to:"/help"}},[t._v("機能紹介ページはこちら")])],1)])])]),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])])},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",[t._v("ひとこと日記")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"sec_title"},[t._v("使い方"),n("br"),t._v("2ステップで簡単操作")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("span",{staticClass:"step"},[t._v("STEP 1")]),t._v(" ユーザー登録")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("span",{staticClass:"step"},[t._v("STEP 2")]),t._v(" 日記を作成")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("・日記ページにて、日記を作成したい日付をタップします。")]),n("li",[t._v("・日記作成ページに行くので、文章を入力して「作成」をタップ。日記が作成されます。")])])}],p={created:function(){this.$route.query.urlpathstr&&this.$router.push(this.$route.query.urlpathstr)},computed:{token:function(){return this.$store.getters.getToken},nickname:function(){return this.$store.getters.getNickname}},methods:{logout:function(){var t=this,e=window.confirm("現在、"+this.nickname+"さんのアカウントでログイン中です。\nログアウトしまか？");e&&_.a.get("/user_login/logout",{headers:{token:this.$store.getters.getToken}}).then((function(){t.deleteToken()})).catch((function(){t.deleteToken()})),alert("ログアウトしました。")},deleteToken:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null)}}},f=p,v=(n("ae7e"),Object(r["a"])(f,h,m,!1,null,"80f93a0c",null)),g=v.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("HeaderVue"),t.display_flg?n("div",{attrs:{id:"content"}},[n("div",{attrs:{id:"upper_content"}},[n("div",{staticClass:"login_name_area"},[t._v(t._s(t.nickname)+"さんがログインしています")]),n("div",{staticClass:"thisMonth"},[n("p",{staticClass:"month_title"},[t._v(t._s(t.month)+"月の日記")]),n("p",{staticClass:"year_title"},[t._v(t._s(t.year)+"年")])]),n("div",{staticClass:"next_pre_pageLink"},[n("span",{staticClass:"pre_month_link link_text",on:{click:function(e){return t.gotoPreMonth()}}},[t._v("<<前月へ")]),n("span",{staticClass:"next_month_link link_text",on:{click:function(e){return t.gotoNextMonth()}}},[t._v("翌月へ>>")])])]),n("div",{attrs:{id:"main_content"}},[n("ul",{staticClass:"day_box"},[t._l(t.diary_array,(function(e,a){return[e.diary_text?n("li",{key:"list_"+e.ymdNo,class:e.class,attrs:{id:"list_"+e.ymdNo},on:{click:function(e){return t.toggleTextArea(a)}}},[n("div",{staticClass:"textArea",class:{open:t.isTextOpenArray[a]}},[n("div",{staticClass:"diary_main"},[n("span",{staticClass:"diary_date"},[t._v(t._s(e.dateStr))]),t._v(" "),n("span",{staticClass:"diary_text",domProps:{innerHTML:t._s(e.diary_text)}})]),n("div",{staticClass:"diary_edit"},[n("span",{on:{click:function(n){return t.update_diary(e.ymdNo,e.dateStr)}}},[t._v("編集")])])])]):t._e(),e.diary_text?t._e():n("li",{key:"list_"+e.ymdNo,class:e.class,attrs:{id:"list_"+e.ymdNo},on:{click:function(n){return t.create_diary(e.ymdNo,e.dateStr)}}},[n("div",{staticClass:"textArea"},[n("div",{staticClass:"diary_main"},[n("span",{staticClass:"diary_date"},[t._v(t._s(e.dateStr))])])])])]}))],2)]),n("div",{attrs:{id:"lower_content"}},[n("div",{staticClass:"next_pre_pageLink"},[n("span",{staticClass:"pre_month_link link_text",on:{click:function(e){return t.gotoPreMonth()}}},[t._v("<<前月へ")]),n("span",{staticClass:"next_month_link link_text",on:{click:function(e){return t.gotoNextMonth()}}},[t._v("翌月へ>>")])])])]):t._e(),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])],1)},y=[],x=(n("fb6a"),n("a9e3"),n("ac1f"),n("5319"),n("b85c")),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",[n("router-link",{attrs:{to:"/"}},[n("p",{staticClass:"header_title"},[t._v("ひとこと日記")])]),n("p",{staticClass:"menu_icon",class:{menuOpen:t.isMenuOpen},on:{click:function(e){return t.click_menu_icon()}}},[t._v("MENU")])],1),n("div",{staticClass:"mnLyr",class:{menuOpen:t.isMenuOpen}},[n("div",{staticClass:"txt_mnLyr"},[n("h3",[t._v("メニュー")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/help"}},[t._v("機能紹介")])],1),n("li",[n("span",{staticClass:"link",on:{click:function(e){return t.logout()}}},[t._v("ログアウト")])]),n("li",[n("span",{staticClass:"link",on:{click:function(e){return t.delete_user_confirm()}}},[t._v("ユーザー登録を解除")])])])])]),n("div",{staticClass:"bck_mnLyr",class:{menuOpen:t.isMenuOpen},on:{click:function(e){return t.click_back_layer()}}})])},$=[],b={data:function(){return{isMenuOpen:!1}},methods:{click_menu_icon:function(){0==this.isMenuOpen?this.isMenuOpen=!0:1==this.isMenuOpen&&(this.isMenuOpen=!1)},click_back_layer:function(){1==this.isMenuOpen&&(this.isMenuOpen=!1)},logout:function(){var t=this,e=window.confirm("ログアウトしますか？");e&&_.a.get("/user_login/logout",{headers:{token:this.$store.getters.getToken}}).then((function(){t.deleteToken()})).catch((function(){t.deleteToken()}))},deleteToken:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null),alert("ログアウトしました。"),this.$router.replace("/login")},delete_user_confirm:function(){var t=this;_.a.get("/user_delete/confirm",{headers:{token:this.$store.getters.getToken}}).then((function(e){var n=e.data.login_name,a=e.data.nickname,i=e.data.user_id;t.delete_user(n,a,i)})).catch((function(){alert("データベースとの通信エラーにより、ユーザー登録の解除を行うことができません。\nログインの状態や通信環境を確認してから、再度行ってください。")}))},delete_user:function(t,e,n){var a=this,i="ログイン名："+t+"\nニックネーム："+e+"\n\nこのユーザー登録を解除しますか？\n日記データは全て失われます。この操作は元に戻せません。",s=window.confirm(i);s&&_.a.post("/user_delete",{user_id:n}).then((function(t){"success"==t.data.delete_user&&(alert("ユーザー登録が解除されました"),a.$store.commit("setToken",null),a.$store.commit("setNickname",null),a.$router.replace("/"))})).catch((function(){alert("ユーザー登録解除の処理でエラーが生じました。詳細はサイトの管理者にお問い合わせください。")}))}}},N=b,C=(n("4f45"),Object(r["a"])(N,w,$,!1,null,"1ddec824",null)),O=C.exports,T={data:function(){return{diary_array:[],display_flg:!1,moveHashFlg:!1,hashObject:null,isTextOpenArray:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]}},computed:{year:function(){return this.$route.params.year},month:function(){return this.$route.params.month},nickname:function(){return this.$store.getters.getNickname},token:function(){return this.$store.getters.getToken}},created:function(){var t=this;_.a.get("/user_auth",{headers:{token:this.$store.getters.getToken}}).then((function(e){"success"==e.data.auth?(t.display_flg=!0,t.getDiaries()):"faild"==e.data.auth&&t.authMismatch()})).catch((function(){t.authMismatch()})),this.hashObject=this.$route.hash},updated:function(){var t=this.moveHashFlg;this.hashObject&&1==t&&(this.$scrollTo(this.hashObject,0,{offset:-6}),this.hashObject=null)},components:{HeaderVue:O},methods:{authMismatch:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null),alert("未ログイン状態か、またはログインの有効期限が切れています。\n再ログインしてください。"),this.$router.replace("/login")},getDiaries:function(){var t=this,e=this.year+("0"+this.month).slice(-2);_.a.get("/get_diaries/"+e,{headers:{token:this.$store.getters.getToken}}).then((function(e){if("expired"==e.data.auth)alert("ログインがタイムアウトしました。もう一度ログインしてください"),t.deleteToken();else{var n=e.data.rows;t.makeDiaryArray(n)}})).catch((function(t){console.log(t),alert("データベースとの接続に不具合が生じ、日記データを取得することができませんでした。")}))},makeDiaryArray:function(t){for(var e=[],n=new Date(this.$route.params.year,this.$route.params.month-2,0).getDate(),a=1;a<=n;a++){var i={},s=this.$route.params.year,r=("0"+this.month).slice(-2),o=("0"+a).slice(-2),c=s+r+o,l=String(a),u=["日","月","火","水","木","金","土"][new Date(s,parseInt(r)-1,parseInt(o)).getDay()],_=[];"土"==u?_.push("saturday_box"):"日"==u&&_.push("sunday_box");var d=new Date,h=d.getFullYear()+("0"+(d.getMonth()+1)).slice(-2)+("0"+d.getDate()).slice(-2);c==h&&_.push("today_box");var m,p="diary_not_exists",f="",v=Object(x["a"])(t);try{for(v.s();!(m=v.n()).done;){var g=m.value;c==g.ymd_no&&(f=g.diary_text.replace(/\n/g,"<br>"),p="diary_exists",i.diary_text=f)}}catch(k){v.e(k)}finally{v.f()}_.push(p),i.ymdNo=c,i.date=l,i.day=u,i.class=_,i.dateStr=this.month+"/"+l+" ("+u+")",e.push(i)}this.moveHashFlg=!0,this.diary_array=e},toggleTextArea:function(t){this.$set(this.isTextOpenArray,t,!this.isTextOpenArray[t])},gotoPreMonth:function(){var t=this.year,e=this.month;"1"==e?(e="12",t=String(Number(t)-1)):e=String(Number(e)-1),this.$router.push("/mypage/"+t+"/"+e),this.getDiaries()},gotoNextMonth:function(){var t=this.year,e=this.month;"12"==e?(e="1",t=String(Number(t)+1)):e=String(Number(e)+1),this.$router.push("/mypage/"+t+"/"+e),this.getDiaries()},create_diary:function(t,e){var n=window.confirm(e+"の日記を作成しますか");1==n&&this.$router.push("/edit/c/"+t)},update_diary:function(t,e){var n=window.confirm(e+"の日記を編集しますか");1==n&&this.$router.push("/edit/u/"+t)}}},S=T,E=(n("08d4"),Object(r["a"])(S,k,y,!1,null,"f6d6eebc",null)),M=E.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("HeaderVue"),t.display_flg?n("div",{attrs:{id:"content"}},[n("div",{staticClass:"date_title"},[n("span",{staticClass:"date"},[t._v(t._s(t.dateStr)+" ")]),t._v("の日記を"),n("span",{staticClass:"edit"},[t._v("作成")])]),n("form",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.diary_text,expression:"diary_text"}],staticClass:"diaryText_area",attrs:{rows:"20",cols:"100"},domProps:{value:t.diary_text},on:{input:function(e){e.target.composing||(t.diary_text=e.target.value)}}}),n("div",{staticClass:"btn_area"},[n("input",{staticClass:"btn",attrs:{type:"button",value:"作成"},on:{click:function(e){return t.makeDiary()}}})])]),n("p",{staticClass:"link_text",on:{click:function(e){return t.backDiaryPage()}}},[t._v("<< 戻る")])]):t._e(),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])],1)},P=[],j={data:function(){return{diary_text:"",display_flg:!1}},computed:{ymdNo:function(){return this.$route.params.ymdNo},dateStr:function(){var t=this.ymdNo.slice(0,4),e=this.ymdNo.slice(4,6),n=this.ymdNo.slice(-2),a=["日","月","火","水","木","金","土"][new Date(t,parseInt(e)-1,parseInt(n)).getDay()];return String(Number(e))+"月"+String(Number(n))+"日("+a+")"}},created:function(){var t=this;_.a.get("/user_auth",{headers:{token:this.$store.getters.getToken}}).then((function(e){"success"==e.data.auth?t.display_flg=!0:"faild"==e.data.auth&&t.authMismatch()})).catch((function(){t.authMismatch()}))},components:{HeaderVue:O},methods:{authMismatch:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null),alert("未ログイン状態か、またはログインの有効期限が切れています。\n再ログインしてください。"),this.$router.replace("/login")},makeDiary:function(){var t=this;""==this.diary_text?alert("日記の本文が入力されていません"):_.a.post("/edit_create/"+this.ymdNo,{diary_text:this.diary_text},{headers:{token:this.$store.getters.getToken}}).then((function(e){if("expired"==e.data.auth)alert("ログインがタイムアウトしました。もう一度ログインしてください"),t.deleteToken();else if("existed"==e.data.sql_query)alert("データベース処理の問題により、日記は作成されませんでした"),t.$router.push("/mypage/"+t.ymdNo.slice(0,4)+"/"+String(Number(t.ymdNo.slice(4,6))));else if("success"==e.data.sql_query){alert(t.dateStr+"の日記が作成されました");var n="/mypage/"+t.ymdNo.slice(0,4)+"/"+String(Number(t.ymdNo.slice(4,6))),a="#list_"+t.ymdNo;t.$router.push({path:n,hash:a})}})).catch((function(t){console.log(t),alert("データベースとの接続に不具合が生じ、日記データを作成することができませんでした。")}))},backDiaryPage:function(){var t=this.ymdNo.slice(0,4),e=this.ymdNo.slice(4,6);this.$router.push("/mypage/"+t+"/"+String(Number(e)))}}},F=j,L=(n("ecc9"),Object(r["a"])(F,D,P,!1,null,"b2605750",null)),A=L.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("HeaderVue"),t.display_flg?n("div",{attrs:{id:"content"}},[n("div",{staticClass:"date_title"},[n("span",{staticClass:"date"},[t._v(t._s(t.dateStr)+" ")]),t._v("の日記を"),n("span",{staticClass:"edit"},[t._v("編集")])]),n("form",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.diary_text,expression:"diary_text"}],staticClass:"diaryText_area",attrs:{rows:"20",cols:"100"},domProps:{value:t.diary_text},on:{input:function(e){e.target.composing||(t.diary_text=e.target.value)}}}),n("div",{staticClass:"btn_area"},[n("input",{staticClass:"btn",attrs:{type:"button",value:"更新"},on:{click:function(e){return t.updateDiary()}}}),n("br"),n("input",{staticClass:"btn delete_btn",attrs:{type:"button",value:"削除"},on:{click:function(e){return t.deleteDiary()}}})])]),n("p",{staticClass:"link_text",on:{click:function(e){return t.backDiaryPage()}}},[t._v("<< 戻る")])]):t._e(),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])],1)},q=[],R={data:function(){return{diary_text:"",display_flg:!1}},computed:{ymdNo:function(){return this.$route.params.ymdNo},dateStr:function(){var t=this.ymdNo.slice(0,4),e=this.ymdNo.slice(4,6),n=this.ymdNo.slice(-2),a=["日","月","火","水","木","金","土"][new Date(t,parseInt(e)-1,parseInt(n)).getDay()];return String(Number(e))+"月"+String(Number(n))+"日("+a+")"}},created:function(){var t=this;_.a.get("/user_auth",{headers:{token:this.$store.getters.getToken}}).then((function(e){"success"==e.data.auth?(t.display_flg=!0,t.getOneDiary()):"faild"==e.data.auth&&t.authMismatch()})).catch((function(){t.authMismatch()}))},components:{HeaderVue:O},methods:{authMismatch:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null),alert("未ログイン状態か、またはログインの有効期限が切れています。\n再ログインしてください。"),this.$router.replace("/login")},getOneDiary:function(){var t=this;_.a.get("/get_one_diary/"+this.ymdNo,{headers:{token:this.$store.getters.getToken}}).then((function(e){"expired"==e.data.auth?(alert("ログインがタイムアウトしました。もう一度ログインしてください"),t.deleteToken()):t.diary_text=e.data.diary_text})).catch((function(t){console.log(t),alert("データベースとの接続に不具合が生じ、日記データを取得することができませんでした。")}))},updateDiary:function(){var t=this;_.a.post("/edit_update/"+this.ymdNo,{diary_text:this.diary_text},{headers:{token:this.$store.getters.getToken}}).then((function(e){if("expired"==e.data.auth)alert("ログインがタイムアウトしました。もう一度ログインしてください"),t.deleteToken();else if("not_updated"==e.data.sql_query)alert("データベース処理の問題により、日記は更新されませんでした"),t.$router.push("/mypage/"+t.ymdNo.slice(0,4)+"/"+String(Number(t.ymdNo.slice(4,6))));else if("success"==e.data.sql_query){var n=window.confirm(t.dateStr+"の日記が更新されました。\n一覧ページに戻りますか？");if(1==n){var a="/mypage/"+t.ymdNo.slice(0,4)+"/"+String(Number(t.ymdNo.slice(4,6))),i="#list_"+t.ymdNo;t.$router.push({path:a,hash:i})}}})).catch((function(t){console.log(t),alert("データベースとの接続に不具合が生じ、日記データを更新することができませんでした。")}))},deleteDiary:function(){var t=this;_.a.get("/edit_delete/"+this.ymdNo,{headers:{token:this.$store.getters.getToken}}).then((function(e){"expired"==e.data.auth?(alert("ログインがタイムアウトしました。もう一度ログインしてください"),t.deleteToken()):"not_deleted"==e.data.sql_query?(alert("データベース処理の問題により、日記は削除されませんでした"),t.$router.push("/mypage/"+t.ymdNo.slice(0,4)+"/"+String(Number(t.ymdNo.slice(4,6))))):"success"==e.data.sql_query&&(alert(t.dateStr+"の日記が削除されました"),t.backDiaryPage())})).catch((function(t){console.log(t),alert("データベースとの接続に不具合が生じ、日記データを削除することができませんでした。")}))},backDiaryPage:function(){var t=this.ymdNo.slice(0,4),e=this.ymdNo.slice(4,6);this.$router.push("/mypage/"+t+"/"+String(Number(e)))},logout:function(){var t=this,e=window.confirm("ログアウトしますか？");e&&_.a.get("/user_login/logout",{headers:{token:this.$store.getters.getToken}}).then((function(e){console.log(e.logout),t.deleteToken()})).catch((function(){t.deleteToken()}))},deleteToken:function(){this.$store.commit("setToken",null),this.$store.commit("setNickname",null),this.$router.replace("/login")}}},V=R,z=(n("b920"),Object(r["a"])(V,H,q,!1,null,"4b319242",null)),I=z.exports,B=n("4d6b"),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("header",[t.token?t._e():[n("router-link",{attrs:{to:"/"}},[n("p",{staticClass:"header_title"},[t._v("ひとこと日記")])])],t.token?[n("HeaderVue",{ref:"header"})]:t._e()],2),n("div",{attrs:{id:"content"}},[t._m(0),t.token?t._e():[n("p",{staticClass:"info"},[t._v("以下の項目に必要事項を入力して、「登録する」を押してください。")]),n("br"),n("form",[n("dl",[t._m(1),n("dd",[n("p",{staticClass:"note"},[t._v("半角英数字で任意の文字を入れてください。メールアドレス可。")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login_name,expression:"login_name"}],attrs:{type:"text",size:"25",maxlength:"255"},domProps:{value:t.login_name},on:{input:function(e){e.target.composing||(t.login_name=e.target.value)}}}),n("p",{directives:[{name:"show",rawName:"v-show",value:t.login_empty_alert,expression:"login_empty_alert"}],staticClass:"p_alert"},[t._v("ログイン名を入力してください")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.login_half_alert,expression:"login_half_alert"}],staticClass:"p_alert"},[t._v("ログイン名は半角英数字にしてください")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.login_dup_alert,expression:"login_dup_alert"}],staticClass:"p_alert"},[t._v("このログイン名はすでに他のユーザーが使用しています。他のログイン名を入力してください")])]),t._m(2),n("dd",[n("p",{staticClass:"note"},[t._v("半角英数字で8文字以上にしてください。")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",size:"25",maxlength:"255"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("p",{directives:[{name:"show",rawName:"v-show",value:t.password_empty_alert,expression:"password_empty_alert"}],staticClass:"p_alert"},[t._v("パスワードを入力してください")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.password_half_alert,expression:"password_half_alert"}],staticClass:"p_alert"},[t._v("パスワードは半角英数字にしてください")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.password_length_alert,expression:"password_length_alert"}],staticClass:"p_alert"},[t._v("パスワードは8文字以上にしてください")])]),t._m(3),n("dd",[n("p",{staticClass:"note"},[t._v("ログイン時に表示される名前です。自由に決めてください。")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text",size:"25",maxlength:"255"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),n("p",{directives:[{name:"show",rawName:"v-show",value:t.nickname_empty_alert,expression:"nickname_empty_alert"}],staticClass:"p_alert"},[t._v("お名前・ニックネームを入力してください")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.nickname_validate_alert,expression:"nickname_validate_alert"}],staticClass:"p_alert"},[t._v("お名前・ニックネームには、& < > \" ' ; 等の特殊文字を使用しないでください")])])]),n("input",{staticClass:"btn",attrs:{type:"button",value:"登録する"},on:{click:function(e){return t.clickRegistBtn()}}})])],t.token?[n("p",[t._v("現在、ログイン中です。新規ユーザー登録を行う場合はログアウトしてから行ってください。")]),n("p",[n("router-link",{attrs:{to:"/mypage"}},[t._v("日記(マイページ)へ")])],1),n("p",{staticClass:"link_text",on:{click:function(e){return t.logout()}}},[t._v("ログアウト")])]:t._e()],2),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])])},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",[t._v("新規ユーザー登録")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("ログイン名")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("パスワード")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("お名前・ニックネーム")])])}],Y=(n("c975"),n("466d"),n("1c46")),Z=n.n(Y),W={data:function(){return{login_name:"",password:"",nickname:"",login_empty_alert:!1,login_half_alert:!1,login_dup_alert:!1,password_empty_alert:!1,password_half_alert:!1,password_length_alert:!1,nickname_empty_alert:!1,nickname_validate_alert:!1,doRegistFig:!0}},computed:{token:function(){var t;return t=null!=this.$store.getters.getToken,t}},components:{HeaderVue:O},methods:{clickRegistBtn:function(){this.login_empty_alert=!1,this.login_half_alert=!1,this.login_dup_alert=!1,this.password_empty_alert=!1,this.password_half_alert=!1,this.password_length_alert=!1,this.nickname_empty_alert=!1,this.nickname_validate_alert=!1,this.doRegistFig=!0,this.verifyValue()},verifyValue:function(){""==this.login_name&&(this.login_empty_alert=!0,this.doRegistFig=!1),this.login_name.match(/^[0-9a-zA-Z-_.@]+$/)||""==this.login_name||(this.login_half_alert=!0,this.doRegistFig=!1),""==this.password&&(this.password_empty_alert=!0,this.doRegistFig=!1),this.password.match(/^[0-9a-zA-Z-_]+$/)||""==this.password||(this.password_half_alert=!0,this.doRegistFig=!1),this.password.length<8&&""!=this.password&&(this.password_length_alert=!0,this.doRegistFig=!1),""==this.nickname&&(this.nickname_empty_alert=!0,this.doRegistFig=!1),this.checkExStr(this.nickname)&&(this.nickname_validate_alert=!0,this.doRegistFig=!1),1==this.doRegistFig&&this.postRegistInfo()},checkExStr:function(t){var e=!1;return-1!=t.indexOf("&")&&(e=!0),-1!=t.indexOf("<")&&(e=!0),-1!=t.indexOf(">")&&(e=!0),-1!=t.indexOf('"')&&(e=!0),-1!=t.indexOf("'")&&(e=!0),-1!=t.indexOf(";")&&(e=!0),e},postRegistInfo:function(){var t=this;_.a.post("/user_regist/check_dup",{login_name:this.login_name}).then((function(e){"duplicate"==e.data.login_name_info?t.login_dup_alert=!0:"unique"==e.data.login_name_info&&t.registUser()})).catch((function(t){console.log(t),alert("登録確認処理で通信エラーが発生しました。もう一度登録ボタンを押してください。")}))},registUser:function(){var t=this,e=confirm("ログイン名："+this.login_name+"\nパスワード：********\nお名前・ニックネーム："+this.nickname+"\n\n以上の内容で登録しますか？");if(e){var n=Z.a.createHash("sha512").update(this.password).digest("hex");_.a.post("/user_regist",{login_name:this.login_name,password:n,nickname:this.nickname}).then((function(e){"success"==e.data.regist&&(t.$store.commit("setToken",e.data.token),t.$store.commit("setNickname",e.data.nickname),alert("ユーザー登録が完了しました。\n日記機能をお使いいただけます。"),t.$router.push("/mypage/"))})).catch((function(t){console.log(t),alert("登録処理でエラーが発生し、登録できませんでした。")}))}},logout:function(){this.$refs.header.logout()}}},G=W,K=(n("b75a"),Object(r["a"])(G,U,J,!1,null,"74f2d6b0",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("header",[t.token?t._e():[n("router-link",{attrs:{to:"/"}},[n("p",{staticClass:"header_title"},[t._v("ひとこと日記")])])],t.token?[n("HeaderVue",{ref:"header"})]:t._e()],2),n("div",{attrs:{id:"content"}},[t._m(0),t.token?t._e():[n("p",{staticClass:"info"},[t._v("ログイン名とパスワードを入力して、「ログインする」を押してください。")]),n("form",[n("dl",[t._m(1),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login_name,expression:"login_name"}],attrs:{type:"text",size:"25",maxlength:"255"},domProps:{value:t.login_name},on:{input:function(e){e.target.composing||(t.login_name=e.target.value)}}})]),t._m(2),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",size:"25",maxlength:"255"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.not_match_alert,expression:"not_match_alert"}],staticClass:"p_alert"},[t._v("ログイン名、またはパスワードが違います。")]),n("input",{staticClass:"btn",attrs:{type:"button",value:"ログインする"},on:{click:function(e){return t.clickLoginBtn()}}})])],t.token?[n("p",[t._v("現在、ログイン中です。")]),n("p",[n("router-link",{attrs:{to:"/mypage"}},[t._v("日記(マイページ)へ")])],1),n("p",{staticClass:"link_text",on:{click:function(e){return t.logout()}}},[t._v("ログアウト")])]:t._e()],2),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])])},tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",[t._v("ログイン")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("ログイン名")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("パスワード")])])}],et={data:function(){return{login_name:"",password:"",not_match_alert:!1,doLoginFig:!0}},computed:{token:function(){var t;return t=null!=this.$store.getters.getToken,t}},components:{HeaderVue:O},methods:{clickLoginBtn:function(){this.not_match_alert=!1,this.doLoginFig=!0,(this.checkExStr(this.login_name)||this.checkExStr(this.password))&&(this.not_match_alert=!0,this.doLoginFig=!1),1==this.doLoginFig&&this.doLogin()},checkExStr:function(t){var e=!1;return-1!=t.indexOf("&")&&(e=!0),-1!=t.indexOf("<")&&(e=!0),-1!=t.indexOf(">")&&(e=!0),-1!=t.indexOf('"')&&(e=!0),-1!=t.indexOf("'")&&(e=!0),-1!=t.indexOf(";")&&(e=!0),e},doLogin:function(){var t=this,e=Z.a.createHash("sha512").update(this.password).digest("hex");_.a.post("/user_login",{login_name:this.login_name,password:e}).then((function(e){"faild"==e.data.login?t.not_match_alert=!0:"success"==e.data.login&&(t.$store.commit("setToken",e.data.token),t.$store.commit("setNickname",e.data.nickname),t.$router.push("/mypage/"))})).catch((function(t){console.log(t),alert("ログイン処理で通信エラーが発生し、ログインできませんでした。")}))},logout:function(){this.$refs.header.logout()}}},nt=et,at=(n("9325"),Object(r["a"])(nt,X,tt,!1,null,"3512fe56",null)),it=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("header",[t.token?t._e():[n("router-link",{attrs:{to:"/"}},[n("p",{staticClass:"header_title"},[t._v("ひとこと日記")])])],t.token?[n("HeaderVue",{ref:"header"})]:t._e()],2),n("div",{attrs:{id:"content"}},[t._m(0),t.token?t._e():[t._m(1),n("form",[n("dl",[t._m(2),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login_name,expression:"login_name"}],attrs:{type:"text",size:"25",maxlength:"255"},domProps:{value:t.login_name},on:{input:function(e){e.target.composing||(t.login_name=e.target.value)}}})]),t._m(3),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",size:"25",maxlength:"255"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.not_match_alert,expression:"not_match_alert"}],staticClass:"p_alert"},[t._v("ログイン名、またはパスワードが違います。")]),n("input",{staticClass:"btn",attrs:{type:"button",value:"ログインする"},on:{click:function(e){return t.clickLoginBtn()}}})])],t.token?[n("p",[t._v("現在、ログイン中です。")]),n("p",[n("router-link",{attrs:{to:"/mypage"}},[t._v("日記(マイページ)へ")])],1),n("p",{staticClass:"link_text",on:{click:function(e){return t.logout()}}},[t._v("ログアウト")])]:t._e()],2),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])])},rt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",[t._v("ログイン")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[t._v("お試しユーザーとしてログインします。"),n("br"),t._v("現在入力されているログイン名とパスワードのまま、「ログインする」を押してください。")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("ログイン名")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("span",[t._v("パスワード")])])}],ot={data:function(){return{login_name:"trial",password:"TrialUser001",not_match_alert:!1,doLoginFig:!0}},computed:{token:function(){var t;return t=null!=this.$store.getters.getToken,t}},components:{HeaderVue:O},methods:{clickLoginBtn:function(){this.not_match_alert=!1,this.doLoginFig=!0,(this.checkExStr(this.login_name)||this.checkExStr(this.password))&&(this.not_match_alert=!0,this.doLoginFig=!1),1==this.doLoginFig&&this.doLogin()},checkExStr:function(t){var e=!1;return-1!=t.indexOf("&")&&(e=!0),-1!=t.indexOf("<")&&(e=!0),-1!=t.indexOf(">")&&(e=!0),-1!=t.indexOf('"')&&(e=!0),-1!=t.indexOf("'")&&(e=!0),-1!=t.indexOf(";")&&(e=!0),e},doLogin:function(){var t=this,e=Z.a.createHash("sha512").update(this.password).digest("hex");_.a.post("/user_login",{login_name:this.login_name,password:e}).then((function(e){"faild"==e.data.login?t.not_match_alert=!0:"success"==e.data.login&&(t.$store.commit("setToken",e.data.token),t.$store.commit("setNickname",e.data.nickname),t.$router.push("/mypage/"))})).catch((function(t){console.log(t),alert("ログイン処理で通信エラーが発生し、ログインできませんでした。")}))},logout:function(){this.$refs.header.logout()}}},ct=ot,lt=(n("b964"),Object(r["a"])(ct,st,rt,!1,null,"035fd4a1",null)),ut=lt.exports;a["a"].use(d["a"]);var _t=new Date,dt="/mypage/"+_t.getFullYear()+"/"+(_t.getMonth()+1),ht=new d["a"]({mode:"history",routes:[{path:"/",component:g},{path:"/mypage",redirect:dt},{path:"/mypage/:year/:month",component:M},{path:"/edit/c/:ymdNo",component:A},{path:"/edit/u/:ymdNo",component:I},{path:"/help",component:B["default"]},{path:"/regist",component:Q},{path:"/login",component:it},{path:"/trial",component:ut},{path:"*",redirect:dt}],scrollBehavior:function(t,e,n){return t.hash?{selector:t.hash}:n?{sevedPositon:n}:{x:0,y:0}}}),mt=n("2f62"),pt=n("0e44");a["a"].use(mt["a"]);var ft=new mt["a"].Store({state:{token:null,nickname:""},getters:{getToken:function(t){return t.token},getNickname:function(t){return t.nickname}},mutations:{setToken:function(t,e){t.token=e},setNickname:function(t,e){t.nickname=e}},plugins:[Object(pt["a"])({key:"hitokoto",paths:["token","nickname"],storage:window.sessionStorage})]}),vt=n("f13c"),gt=n.n(vt),kt={url01:"http://localhost:3000",url02:"http://54.168.208.113:3000",url03:"https://diary-app.sekiguchiportfolio.net"};_.a.defaults.baseURL=kt.url03,a["a"].config.productionTip=!1,a["a"].use(gt.a),new a["a"]({router:ht,store:ft,render:function(t){return t(l)}}).$mount("#app")},5938:function(t,e,n){},6:function(t,e){},"685a":function(t,e,n){},7:function(t,e){},8:function(t,e){},8207:function(t,e,n){"use strict";var a=n("8fda"),i=n.n(a);e["default"]=i.a},"85ec":function(t,e,n){},"8fda":function(t,e){},9:function(t,e){},9325:function(t,e,n){"use strict";var a=n("a9af"),i=n.n(a);i.a},"9b9e":function(t,e,n){},a9af:function(t,e,n){},ae7e:function(t,e,n){"use strict";var a=n("9b9e"),i=n.n(a);i.a},b75a:function(t,e,n){"use strict";var a=n("685a"),i=n.n(a);i.a},b920:function(t,e,n){"use strict";var a=n("fafa"),i=n.n(a);i.a},b964:function(t,e,n){"use strict";var a=n("0385"),i=n.n(a);i.a},be25:function(t,e,n){},d408:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("header",[n("router-link",{attrs:{to:"/"}},[n("p",{staticClass:"header_title"},[t._v("ひとこと日記")])])],1),n("div",{attrs:{id:"content"}},[t._m(0),n("p",[t._v("ひとこと日記の機能について説明します。")]),n("hr"),n("h2",[t._v("ユーザー登録機能")]),t._m(1),n("hr"),n("h2",[t._v("ログイン機能")]),t._m(2),n("hr"),n("h2",[t._v("日記機能")]),n("h3",[t._v("日記のリスト表示")]),t._m(3),n("h3",[t._v("日記の表示")]),t._m(4),n("h3",[t._v("日記の作成")]),t._m(5),n("h3",[t._v("日記の編集・削除")]),t._m(6),n("h3",{staticClass:"example"},[t._v("使用例")]),n("img",{attrs:{src:"/images/trial_example.png",width:"300",height:"502",alt:"日記の使い方"}}),n("br"),n("hr"),n("h2",[t._v("メニュー機能")]),n("p",[t._v("左上のメニューアイコンをタップすると、メニューが開きます。")]),n("h3",[t._v("機能紹介")]),t._m(7),n("h3",[t._v("ログアウト")]),t._m(8),n("h3",[t._v("ユーザー登録を解除")]),t._m(9),n("hr"),n("p",{staticClass:"link"},[n("router-link",{attrs:{to:"/mypage"}},[t._v("ひとこと日記 ≫ 日記に戻る")])],1)]),n("footer",[t._v("© 2021 Sekiguchi Atsushi")])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("span",[t._v("機能紹介")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("このサイトのユーザーアカウントを作成して、日記機能を使用できるようにします。"),n("br"),t._v("ログイン名、パスワード、氏名またはニックネームを決めて登録してください。")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("このサイトにログインし、日記機能を使用することができます。"),n("br"),t._v("ログイン名とパスワードが必要です。")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("日記ページにアクセスすると、ひと月ごとの日記リストが表示されます。")]),n("li",[t._v("「前の月」、「次の月」リンクをタップすると、前月や来月の日記リストが見られます。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("日記がある日付ボックスをタップすると、日記が全文表示され、編集ボタンが表示されます。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("日記がない日付ボックスをタップすると、日記作成用のページへ移動します。")]),n("li",[t._v("日記が作成されると、日付ボックス内に日記の文章が一行だけ表示されます。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("編集ボタンをタップすると、既存の日記の文章を編集するページに移動します。")]),n("li",[t._v("また、日記を削除することも可能です。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("このページです")]),n("li",[t._v("本サイトの機能について解説しています。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("このサイトからログアウトします。")]),n("li",[t._v("再ログインは、ログインページから行ってください。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("ユーザー登録を解除します。")]),n("li",[t._v("ユーザー登録を解除すると、登録したユーザー情報や日記データは全て失われます。")])])}]},d716:function(t,e,n){"use strict";var a=n("be25"),i=n.n(a);i.a},ecc9:function(t,e,n){"use strict";var a=n("4ad5"),i=n.n(a);i.a},fafa:function(t,e,n){}});
//# sourceMappingURL=app.96a4c90f.js.map